@model DistroLab2.ViewModels.MessageViewModel
@{
    ViewBag.Title = "WriteMail";
}

@{
    DistroLab2.ViewModels.MailUserViewModel[] usrs = DistroLab2.Controllers.Mail_Controllers.WriteController.getUsers();
}

@{
    var usernames = new List<string>();

    for(int i = 0; i < usrs.Length; i++)
    {
        usernames.Add(usrs[i].Username);
    }

    MultiSelectList msl = new MultiSelectList(usernames);

    //String success = "hej" + Model.MessId.ToString();

}
    <h2>WriteMail</h2>

    <html>
    <head>

    </head>
    <body>

        <p>Users</p>
        @using (Html.BeginForm("WriteHello", "Write"))
        {
            @Html.ListBox("UserListViewModel", msl)
            
            <p>Mail Title:</p>
            @Html.TextBox("Title", "")

            <p>Mail Title:</p>
            @Html.TextArea("Message")

            <p></p>
            <input type="submit" />
        }

        @if (Model != null)
        {
            String success = "Meddelande numer " + Model.MessId.ToString() +" Sänt till: Somone " +" Sänt vid " +Model.Timestamp;

            if (Model.Success == true)
            {
                <p>Send succsesfull</p>
                   @Html.Raw(success)
            }
            else {
                <p>Send failed</p>
            }
        }

    </body>
</html>
